// prisma/schema.prisma
datasource db {
    provider  = "postgresql"
    url       = env("AI_DATABASE_URL")
    directUrl = env("DATABASE_URL_UNPOOLED")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id                 String       @id @default(cuid())
    email              String       @unique
    name               String?
    createdAt          DateTime     @default(now())
    updatedAt          DateTime     @updatedAt
    lessonPlans        LessonPlan[]
    stripe_customer_id String?
    posts              Post[]       // New relation to Post model
}

model LessonPlan {
    id           String    @id @default(cuid())
    title        String
    duration     Int
    subject      String
    sections     Section[]
    createdAt    DateTime  @default(now())
    userId       String
    user         User      @relation(fields: [userId], references: [id])
    topic        String
    subtopic     String
    objective    String
    studentLevel String
}

model Section {
    id           String     @id @default(cuid())
    title        String
    content      String
    lessonPlanId String
    lessonPlan   LessonPlan @relation(fields: [lessonPlanId], references: [id])
    duration     Int
}

// New Post model for blog functionality
model Post {
    id        String   @id @default(cuid())
    title     String
    content   String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    userId    String
    user      User     @relation(fields: [userId], references: [id])
}
